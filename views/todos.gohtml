<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link -->
    <!--     href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" -->
    <!--     rel="stylesheet" -->
    <!--     integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" -->
    <!--     crossorigin="anonymous"> -->
    <!-- <script -->
    <!--     src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" -->
    <!--     integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" -->
    <!--     crossorigin="anonymous"></script> -->
    <script src="https://unpkg.com/htmx.org"></script>

    <title>GoTodo: The Go-Powered Todo App!</title>
    <style type="text/css" media="screen">
      .item-done {
          text-decoration: line-through;
      }
      .item-inProgress {
          background-color: #ffcd39;
      }
    </style>

  </head>

  <body>
    <header>
      <h1>Todos</h1>
      <form id="newTodoForm">
        <!-- short name of todo -->
        <label for="newTodoName">New todo name?</label>
        <input type="text" name="newTodoName" id="newTodoName" required />
        <br />

        <!-- drop down saying what type of todo -->
        <label for="newTodoKind">What kind of todo?</label>
        <select id="newTodoKind" name="newTodoKind" required>
          {{ block "Options" . }}
            {{ $todoKinds := index . 0 }}
              {{ range $key, $strRepresentation := $todoKinds.GetValidKinds }}
              <option value="{{ $key }}">{{ $strRepresentation }}</option>
              {{ end }}
          {{ end }}
        </select>
        <br />

        <!-- longer input for todo desc -->
        <label for="newTodoDesc">Description for new todo?</label>
        <br />
        <textarea name="newTodoDesc" id="newTodoDesc"
                  placeholder="(not mandatory, 2000 char max)"
                  maxlength="2000"></textarea>
        <br />

        <!-- button to turn in new todo -->
        <button hx-post="/createTodo"
                hx-target="#todos"
                hx-swap="innerHTML">
          Create todo!
        </button>
      </form>
    </header>

  <!-- section to allow user to input an item to add -->
  <p>TODO: finish app lol</p>

  <br>
  <!-- section to show the todos that are there -->
  <!-- ðŸ—‘ for delete -->
  <!-- âœ…for mark done -->
  <main>
    <p>clear for todo, yellow for in progress, strike through for deleted</p>

    <table id="todos">
    {{ block "Todos" . }}
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Kind</th>
        </tr>
      </thead>
      <tbody>
        {{ range $todo := . }}
        <tr class="{{ if $todo.IsDone }}
                   item-done
                   {{ else if $todo.IsInProgress }}
                   item-inProgress
                   {{ end }}">
          <td> {{ $todo.Name }} </td>
          <td> {{ $todo.Desc }} </td>
          <td> {{ $todo.Kind }} </td>
          <!-- mark todo button -->
          <td>
            <button hx-put="/markTodo/{{ $todo.TodoId }}"
                    hx-target="#todos"
                    hx-swap="innerHTML">
              âœ…
            </button>
          </td>
          <!-- delete todo button -->
          <td>
            <button hx-delete="/delete/{{ $todo.TodoId }}"
                    hx-target="#todos"
                    hx-swap="innerHTML">
              ðŸ—‘
            </button>
          </td>
        </tr>
        {{ end }}
      </tbody>
    {{ end }}
    </table>
  </main>
  </body>
</html>
